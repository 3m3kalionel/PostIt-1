language: node_js
before_script:
- psql -c 'create database travis_ci_test;' -U postgres
- npm run migrations
after_script:
- npm run coverage
services:
- postgresql
node_js:
- node
- '6'
env:
  global:
  - CXX=g++-4.8
  - NODE_ENV=test
  - URL_TEST=postgres://postgres@localhost/travis_ci_test
addons:
  apt:
    sources:
    - ubuntu-toolchain-r-test
    packages:
    - g++-4.8
before_deploy:
- npm run transpile
deploy:
  provider: heroku
  api_key:
    secure: sWnPHqchAM3hjRK4kU03BaaZk/fNJOCspGn4Mx952hBN/bTYbOeUpCr9WLJKhTg88geR5+MnFz9NRtG5aq1lrpKlHXmHECnIjyk/oqIuUA9EcQPJZV4QAvZkm7Ila4AeKN0Ikc59KlFoMstvls/rPnTAGUkDn0i86/43yQ9GZIQKdmLBTAdcFSWJKVTb9yuqDLRfSQwK10+dobsPJPfh8hyjptle5CAb3bQmAHsCqCzG9CyvBfBah0Ua0h/GJPwYcwkzP9VjI+D7CqGFinE5LpYIpfATV5ZaXe0fc55Z+n8oNAWN3KqhyfHNJdf0cZ4IRWD7/1T8DpCvph1viJQLpb4D7GuVCifXU2qKxUQbq4h2zZOAsizYUaEZcf+3EGSOkcmY/vovlR008I6NFcrj5JyqK+x3FELszoG5AE6p9JPGPTmyoINOYzmY7es3jr8sR9HUlnVvsepldkQFCsqS9ZllOkyqjLS0RLSgLQv615O7iEdhIeVe4MmEjhA50sy8bun4ec4+NZypKpJm3NhUWuYOfbxSKsbts0/j33RHiX5Y85TQyKXtXsRJxH3Ux7UwzqK3XRaOgkdzfyQfgWkRo+yeRrGi5ILNX1QTNEkbbF9qAFH6kqHx/F/Xtd1DogYnxXLxSEYQ2XCcpIhFt7c6eC9jb3x9N0HhLFRWpaENNPw=
  app: app-postit
  on: develop
  run:
  - npm install
  - npm run migrations
  - npm start
